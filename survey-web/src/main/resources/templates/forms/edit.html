<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.w3.org/1999/xhtml"
	layout:decorator="layouts/layout"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<title>Forms</title>
</head>
<body>
	<div layout:fragment="content">
		<h3>Form repository editing</h3>
		<form id="reposFormMain" class="entity-form"
			th:action="@{/forms/save}" method="POST">
			<input type="hidden" th:name="${_csrf.parameterName}"
				th:value="${_csrf.token}" /> <input type="hidden" name="id"
				id="formId" th:value="${form.id}" />

			<div class="grid-x">
				<div class="cell large-4 row-cell">
					<label>Name <input id="reposName" name="name" type="text"
						placeholder="Name of form repository" th:value="${form.name}" />
					</label>
				</div>
				<div class="cell large-4 row-cell">
					<label>Description <input id="reposDesc" name="description"
						th:value="${form.description}" type="text"
						placeholder="Description" />
					</label>
				</div>
				<div class="cell large-4 row-cell">
					<label>List display field <input name="display"
						th:value="${form.display}" type="text"
						placeholder="Display field on list" />
					</label>
				</div>
			</div>

			<div class="form-repos">
				<div class="row grid-x">
					<div class="cell large-8 medium-6 form-repos-tree">
						<label>Form repository definition</label>
						<div class="row grid-x">
							<div id="reposTree" class="cell large-7 medium-6"></div>

							<div class="cell large-5 medium-6 entity-form">
								<div id="groupForm" style="display: none;">
									<h5>Group properties</h5>
									<label>Name</label><input name="_name" /> <label>Label
									</label><input name="label" /> <label>Type </label><input name="type" />
									<input type="hidden" id="nodeIdRef" name="nodeIdRef" />
									<div class="controls">
										<button type="button" onclick="saveNewGroup()"
											style="margin: 1rem 0;" class="button tiny hollow">Save</button>
									</div>
								</div>
								<div id="inputForm" style="display: none;">
									<select name="action">
										<option value="manageInput">Input properties</option>
										<option value="editGroup">Edit Group</option>
									</select> <label>Name</label><input name="_name" /> <label>Label
									</label><input name="label" /> <label>Type </label><input name="type" />
									<label>Regex </label><input name="regex" /> <label>Regex
										Message </label><input name="regexMessage" /> <input type="hidden"
										id="nodeIdRef" name="nodeIdRef" />
									<div class="controls">
										<button type="button" onclick="deleteSelected()"
											style="margin: 1rem 0;" class="button tiny hollow alert">Delete
											Selected</button>
										<button type="button" onclick="saveNewInput()"
											style="margin: 1rem 0;" class="button tiny hollow">Save</button>
									</div>
								</div>
							</div>
						</div>

					</div>
					<div id="reposJson" class="cell large-4 medium-6 form-repos-json">
						<textarea rows="12" cols="" th:text="${form.json}" name="json"></textarea>
					</div>
				</div>
			</div>
			<div class="button-group expanded">
			<!-- a class="button alert hollow" th:href="@{/forms}">Cancel (Ignore changes)</a--> <input
				onclick="formSubmitOverall()" name="submit" type="submit"
				class="button" value="Save"></input>
			</div>
		</form>
	</div>
</body>
</html>